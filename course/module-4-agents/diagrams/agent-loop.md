[← Оглавление](../../../README.md)

# Цикл работы агента (Agent Loop)

Агент работает итеративно, а не "сделал и все". Каждая итерация сужает разрыв между текущим состоянием кода и критериями приемки.

```mermaid
flowchart LR
    Plan["Plan<br>Анализирует задачу,<br>читает файлы,<br>составляет план"]
    Act["Act<br>Пишет код,<br>создает файлы,<br>вызывает команды"]
    Observe["Observe<br>Запускает тесты,<br>линтер, билд —<br>читает результат"]
    Decision{"Критерии<br>выполнены?"}
    Adjust["Adjust<br>Анализирует ошибки,<br>меняет подход"]
    Done["Готово<br>Коммит + PR"]

    Plan --> Act --> Observe --> Decision
    Decision -->|"Нет — ошибки<br>в тестах/линтере"| Adjust
    Adjust --> Plan
    Decision -->|"Да — все<br>зеленое"| Done
```

**Ключевой момент:** агент не останавливается после первой попытки. Он итерирует до тех пор, пока:
- Все критерии приемки выполнены (тесты зеленые, линтер молчит), **или**
- Достигнут лимит итераций — тогда агент сообщает о блокере
