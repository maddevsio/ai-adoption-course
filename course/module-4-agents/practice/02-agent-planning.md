# Опиши проблему и получи план от агента

### Цель

Научиться правильно формулировать задачу для агента-планировщика и получать детализированный план реализации с критериями приёмки.

### Новый flow (не "вот тебе готовый промпт")

Вместо копирования готового промпта, вы проходите весь цикл самостоятельно:

1. **Описываете проблему** своими словами (как бы описали коллеге)
2. **Ставите задачу агенту-планировщику**: попросить декомпозировать на подзадачи
3. **Агент выдаёт план** с подзадачами и критериями
4. **Вы ревьюите план** и корректируете
5. **Дополняете требования**: просите добавить тесты, линтер-проверки, etc
6. **Агент реализует** утверждённый план

Это учит думать как Product Owner, который декомпозирует фичи на задачи для команды.

### Пример описания проблемы

**Задача для песочницы task-manager:**

Сейчас в task-manager есть только GET и POST для задач. Нужно добавить возможность обновлять существующую задачу.

**Описание своими словами (как бы сказали коллеге):**

> Нужен эндпоинт для обновления задачи. Должен работать так: клиент отправляет PUT /tasks/{id} с новым title, сервер обновляет задачу в БД и возвращает обновлённую версию. Если задачи с таким ID нет — вернуть 404.

### Запуск планирования через plan mode

Используйте **plan mode** или скилл `writing-plans`

1. Опишите задачу своими словами (как в примере выше)
2. Агент изучит вводные данные, задаст уточняющие вопросы
3. Агент напишет план и попросит ваше одобрение

**Пример запроса:**

```
Нужен эндпоинт для обновления задачи в task-manager API.
Клиент отправляет PUT /tasks/{id} с новым title в body,
сервер обновляет задачу в БД и возвращает обновлённую версию.
Если задачи с таким ID нет — вернуть 404 Not Found.

Составь план реализации. Не пиши код — только план.
```

### Чеклист: что должно быть в плане

План от агента считается хорошим, если содержит:

- ✅ **Анализ текущей архитектуры** (агент прочитал файлы и понял структуру)
- ✅ **Декомпозиция на подзадачи** (минимум 3-5 подзадач)
- ✅ **Для каждой подзадачи**: что делать, какие файлы, критерии приёмки
- ✅ **Тесты явно указаны** (какие сценарии покрыть)
- ✅ **Проверки качества** (линтер, тесты) включены как отдельная подзадача
- ✅ **Соответствие AGENTS.md** (агент учёл правила из конфигурации)

### Ревью и корректировка плана

После получения плана от агента:

**1. Проверьте, что агент прочитал AGENTS.md:**

Поищите в плане ссылки на технологии, conventions, или правила из AGENTS.md. Например, если в AGENTS.md указано "использовать async/await", план должен содержать "async def" для endpoints.

**2. Проверьте полноту:**

Все ли сценарии покрыты тестами? Агент предусмотрел случаи ошибок (404, валидация)?

**3. Дополните план (пример промпта):**

```
Дополни каждую подзадачу:
1. Для подзадачи с тестами — добавь конкретные assert'ы (что именно проверять)
2. Для подзадачи с endpoint — укажи точную сигнатуру функции
3. Добавь подзадачу: обновить документацию (если есть README с описанием API)
```

**4. Утвердите план:**

```
Реализуй план в новой сессии. Запусти параллельных агентов для изолированных задач
```

### Задание

1. Откройте ваш AI-агент (Claude Code, Cursor, или другой инструмент)
2. Перейдите в директорию вашего проекта (task-manager)
3. Запросите написание плана с помощью скилла writing-plans
5. Проверьте план по чеклисту
6. Дополните план (попросите добавить детали по тестам и линтеру)
7. Утвердите финальный план

**НЕ переходите к реализации на этом шаге.** Остановитесь после получения утверждённого плана.

### Проверка

План готов к реализации, если:

- ✅ Агент прочитал AGENTS.md и учёл правила проекта
- ✅ План содержит 4-6 подзадач
- ✅ Для каждой подзадачи указаны файлы и критерии приёмки
- ✅ Тесты включены в план (минимум 3-4 тестовых сценария)
- ✅ Линтер и quality checks упомянуты
- ✅ Вы понимаете каждую подзадачу и согласны с подходом

### Время выполнения

15 минут
