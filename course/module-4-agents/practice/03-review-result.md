[← Оглавление](../../../README.md)

# Реализация и ревью результата

### Цель

Агент реализует утверждённый план. Ваша задача -- провести code review результата по чеклисту.

### Реализация

Если вы остановились на Шаге 2 с утверждённым планом, продолжите в том же chat-сессии:

```
Реализуй план в новой сессии. Запусти параллельных агентов для изолированных задач
```

Агент начнёт работу. Дождитесь завершения всех подзадач.

### Чеклист ревью

После того как агент завершил реализацию, проверьте результат по этому чеклисту:

#### 1. Код работает?

```bash
# Для Python
pytest
# Ожидается: все тесты прошли (зелёные)

# Для TypeScript
npm test
# Ожидается: все тесты прошли
```

**Проверка вручную:**

```bash
# Запустить dev сервер
uvicorn main:app --reload  # Python
# или
npm start  # TypeScript

# В другом терминале — тестовый запрос
curl -X POST http://localhost:8000/tasks -H "Content-Type: application/json" -d '{"title": "Test task"}'
# Ожидается: 201, вернётся задача с ID

curl -X PUT http://localhost:8000/tasks/1 -H "Content-Type: application/json" -d '{"title": "Updated title"}'
# Ожидается: 200, вернётся задача с обновлённым title

curl -X PUT http://localhost:8000/tasks/999 -H "Content-Type: application/json" -d '{"title": "Updated"}'
# Ожидается: 404 Not Found
```

**Что искать:**
- ❌ Тесты падают — агент не проверил результат
- ❌ Endpoint не отвечает — ошибка в роутинге или БД
- ❌ Неправильные status codes (200 вместо 404)

#### 2. Тесты проходят?

```bash
# Запустить тесты с verbose выводом
pytest -v  # Python
npm test -- --verbose  # TypeScript
```

**Что искать:**
- ❌ Есть падающие тесты — агент не довёл задачу до конца
- ❌ Тесты пропущены (skipped) — агент не реализовал все сценарии
- ❌ Coverage ниже 80% для нового кода

#### 3. Линтер чистый?

```bash
# Python
ruff check .
# Ожидается: 0 ошибок

# TypeScript
npm run lint
# Ожидается: 0 errors, 0 warnings
```

**Что искать:**
- ❌ Ошибки импортов (unused imports)
- ❌ Type errors (для TypeScript/Python с mypy)
- ❌ Нарушения code style (длинные строки, отсутствие пробелов)

#### 4. Стиль соответствует AGENTS.md?

**Что искать:**
- ❌ **Отсутствуют type hints:** `def update_task(task_id, title)` вместо `def update_task(task_id: int, title: str) -> Task | None`
- ❌ **Не используется async:** `def get_task()` вместо `async def get_task()`
- ❌ **Неправильное именование:** `UpdateTask` вместо `update_task` (для функций)

#### 5. Нет лишних файлов/зависимостей?

**Что искать:**
- ❌ Файлы БД закоммичены (tasks.db, *.sqlite)
- ❌ .env файл в git
- ❌ __pycache__, node_modules/ добавлены
- ❌ Лишние зависимости установлены (агент добавил библиотеку, которая не нужна)

#### 6. Нет security-проблем?

**Что искать:**
- ❌ Raw SQL с интерполяцией строк (f-strings, template literals)
- ❌ Отсутствие валидации входных данных
- ❌ Credentials в коде (API keys, пароли, connection strings)

### Задание

1. Убедитесь что агент завершил реализацию плана из Шага 2
2. Пройдитесь по чеклисту ревью (6 пунктов выше)
3. Для каждого пункта — проверьте и запишите: ✅ ОК или ❌ Проблема найдена
4. Если нашли проблемы — переходите к Шагу 4 (Итерация)

### Проверка

Ревью завершено, если вы проверили все 6 пунктов:

- ✅ Код работает (тесты проходят, endpoint отвечает)
- ✅ Тесты написаны и проходят (минимум 3-4 сценария)
- ✅ Линтер чистый (0 ошибок)
- ✅ Стиль соответствует AGENTS.md (type hints, async, naming)
- ✅ Нет лишних файлов в git (БД, .env, кеш)
- ✅ Нет security-проблем (SQL injection, credentials в коде)

### Время выполнения

10 минут
---

[← Опиши проблему и получи план от агента](02-agent-planning.md) | [Оглавление](../../../README.md) | [Итерация — исправь найденные проблемы →](04-iteration.md)
