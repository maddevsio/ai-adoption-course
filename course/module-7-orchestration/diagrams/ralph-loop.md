# Ralph Loop: цикл автономной работы агента

Ralph Loop — паттерн, при котором агент работает в цикле Do -> Check -> Fix до тех пор, пока все проверки не пройдут. Критерий остановки — не "я написал код", а "все тесты зеленые".

```mermaid
flowchart TD
    Start["Получена задача"] --> Do["Do\nАгент пишет код"]
    Do --> Check{"Check\nТесты? Линтер?\nТипы? Билд?"}
    Check -->|"Все зеленое"| Done["Done\nКоммит + PR"]
    Check -->|"Есть ошибки"| Limit{"Лимит\nитераций\nдостигнут?"}
    Limit -->|"Нет"| Fix["Fix\nЧитает ошибку,\nисправляет код"]
    Fix --> Do
    Limit -->|"Да"| Escalate["Эскалация\nПередать разработчику\nили сменить агента"]
```

**Две точки выхода:**
- **Done** — все автоматические проверки прошли, агент создает коммит и PR
- **Эскалация** — после N итераций (например, 50) или по таймауту агент признает, что не справляется, и передает задачу человеку или другому агенту (hot-swap)
