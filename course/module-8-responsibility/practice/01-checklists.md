[← Оглавление](../../../README.md)

# Чеклисты для работы с AI-кодом

## Чеклист "Доверяй, но проверяй"

Перед каждым коммитом кода от ИИ пройдитесь по чеклисту:

#### Уровень 3
- [ ] **Нет чувствительных данных в промпте и контексте?**
- [ ] **Прочитал сгенерированный код?** Если есть непонятные места — разберитесь.
- [ ] **Тесты запущены и прошли?** `npm test` / `pytest` / `go test` — зелёные.
- [ ] **Нет захардкоженных секретов?** Проверка: `grep -r "API_KEY\|password\|secret" .`
- [ ] **Нет лишних зависимостей?** Проверьте `package.json` / `requirements.txt` / `go.mod`.
- [ ] **Соответствует конвенциям проекта?** Именование, форматирование, структура.
- [ ] **Diff просмотрен перед слиянием?** Нет неожиданных изменений.
- [ ] **Co-authorship указан?** Добавьте: `Co-Authored-By: Claude <noreply@anthropic.com>`.

#### Уровень 4
- [ ] **Проверил MCP-доступы?** Какие серверы использовались? Правильные ли права?
- [ ] **Read-only где возможно?** MCP для ревью и анализа — только чтение. БД — только SELECT.
- [ ] **Сетевой доступ ограничен?** MCP-серверы не имеют выхода в интернет без явной необходимости.
- [ ] **Нет доступа к чувствительным путям?** `~/.ssh`, `~/.aws`, `~/.config`, `.env` — исключены.
- [ ] **Действия агента логируются?** Trace-файлы фиксируют команды и изменённые файлы.

#### Уровень 5
- [ ] **Агенты изолированы?** Параллельные агенты работают в отдельных `git worktree`.
- [ ] **Sandboxing настроен?** Агенты работают в Docker-контейнерах с минимальными правами.
- [ ] **Результаты согласованы?** Код, документация и тесты от разных агентов не противоречат друг другу.
- [ ] **Trace-файл заполнен?** Каждый агент зафиксировал процесс: команды, решения, изменения.
- [ ] **ADR не нарушены?** Агенты не изменили архитектурные решения без согласования.



### Что делать, если была допущена ошибка ИБ

1. **Не паникуйте, но действуйте быстро**
2. **Остановите деплой,** если код уже в production
3. **Исправьте уязвимость** — попросите агента переписать код безопасно
4. **Ротируйте credentials,** если они были скомпрометированы
5. **Проверьте Git историю** — если credentials были закоммичены, удалите их из истории (`git filter-branch` или BFG Repo-Cleaner)
6. **Обновите AGENTS.md** — добавьте правило для предотвращения подобных проблем
---

[← 3. Ответственность по уровням](../theory/03-responsibility.md) | [Оглавление](../../../README.md) | [Финальный тест →](../../final-test.md)
