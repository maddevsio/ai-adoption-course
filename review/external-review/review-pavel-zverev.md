# Ревью Павла Зверева — модули 1-6

## Модуль 1

### diagnostics.md

> Не хватило калькулятора. КМК, скипнут.

Добавлена таблица для записи ответов и подсчёта баллов прямо в документе (5 строк — по одной на вопрос + итого). Добавлен `[!TIP]` блок с пояснением системы баллов. Секция переименована: "Подсчёт" (механика) + "Ключ интерпретации" (результаты).

---

## Модуль 2

### cost-optimization.md

> Никогда: Opus на rename переменной. Haiku на проектирование архитектуры. Я бы тут оставил только пример с Haiku (он правильный). С Opus на подписке без разницы что делать.

Убрано "Opus на rename переменной". Оставлен только пример с Haiku: "Haiku на проектирование архитектуры — дешёвые модели не справляются со сложными задачами".

### 01-setup.md

> `[Ссылки на архитектурную документацию]` — тут как будто автозамена не сработала.

Удалена строка-плейсхолдер. Под ней уже были конкретные пути (`docs/ARCHITECTURE.md`, `docs/API.md`, `docs/adr/`).

### 01-types-of-tools.md, 02-available-tools.md, 03-multi-model.md

> Можно сюда еще добавить Kimi CLI?

Три изменения:
- `01-types-of-tools.md` — Kimi CLI добавлен в заголовок секции CLI-агентов
- `02-available-tools.md` — добавлена секция 2.8 "Kimi CLI — бесплатный агент от Moonshot AI", добавлен в таблицу комбинаций ($0-20/мес)
- `03-multi-model.md` — Kimi K2 добавлен в категорию дешёвых/быстрых моделей

---

## Модуль 3

### 03-antipatterns.md

> Сюда бы еще добавить про промпты без критериев самопроверки / приемки. У агента нет способа верифицировать себя.

Добавлена секция 4.4 "Отсутствие критериев приёмки". Структура как у остальных антипаттернов: Плохо → объяснение → Хорошо (с конкретными acceptance criteria для фильтрации задач). `[!IMPORTANT]` блок: "Критерии приёмки — способ для агента проверить себя."

---

## Модуль 4

### agents-md-structure.md

> Сюда можно добавить Before finishing. Еще важен дисклеймер, что это главный entry-point. Если контекста слишком много - можно раскидать по разным файлам, а в AGENTS.md оставить только рефиренсы на них и описание "какой файл зачем читать". Например, за стэком ходи сюда: docs/architecture.md

Три изменения:
- Добавлен узел "Before Finishing" в Mermaid-диаграмму (чеклист перед коммитом: тесты, линтер, coverage)
- Вводный текст переписан: "Это **главная точка входа**: агент читает AGENTS.md первым"
- `[!TIP]` блок с примером разделения на файлы со ссылками из AGENTS.md (стек → `docs/architecture.md`, API → `docs/api.md`, ADR → `docs/adr/`)

### 05-testing.md

> К упр 1 можно добавить про coverage (удалось ли покрыть?)

Добавлен чекпоинт: "Какой coverage удалось достичь? Запустите отчёт покрытия (`pytest --cov` / `npm test -- --coverage`) и оцените, достаточно ли 5 сценариев."

### 03-testing-with-agents.md

> Тесты — единственная детерминистическая защита. ^ пожалуй не единственная, но одна из самых эффективных. Есть еще "многофакторное взвешивание при авторевью". Вот тут есть пример: https://github.com/maddevsio/enji-fleet/pull/174. Тесты не защитят от техдолга, ревью с guardrails защитят (https://github.com/maddevsio/enji-fleet/blob/main/.agents/skills/fleet-pr-review/SKILL.md, см блокеры, риски, критерии оценки). Про ревью можно отдельную страницу написать, кстати. Стандартное ревью на больших объемах изменений - нереально.

Три изменения:
- "единственная детерминистическая защита" → "одна из самых эффективных детерминистических защит"
- Добавлена секция "Автоматическое ревью как дополнительная защита" с конкретными ссылками на enji-fleet PR #174 и fleet-pr-review skill
- `[!NOTE]` блок: тесты проверяют *что* код делает, ревью проверяет *как* он написан

Отдельная страница про ревью — на будущее, пока ограничились секцией.

---

## Модуль 5

### implementation-notes-template.md

> Честно говоря не думаю, что артефакты тут нужны. Это обычно git diff делает. Предлагаю убрать.

> Тут я бы добавил, что разработчику и самому должно быть удобно пихать в агента эти доки. Например "сверься со списком фичей на MVP", "прочитай транскрипт беседы с коллегами об архитектуре". Это и про личное удобство тоже. Почти то же самое, что гиперссылки - просто удобно переходить и проваливаться по необходимости в соответствующие документы. Еще что важно - это DRY. Самый большой враг такого большого контекста - противоречия, их стоит всячески избегать. Агент хорошо их отлавливает, если у документов есть временные метки в названии.

Два изменения:
- Секция "Артефакты" удалена. В примечании для агентов добавлено: "Список артефактов доступен через `git diff` — дублировать его в trace не нужно."
- Добавлен `[!TIP]` блок сразу после шапки: удобство разработчика ("сверься со списком фич", "прочитай транскрипт"), DRY и противоречия между документами, timestamps в именах файлов для определения актуальности.

### 06-checklist.md

> Тут предлагаю включить про рефлексию. Иногда все-таки надо разбираться с противоречиями, архаизмами. Это важный ритуал теперь.

> Еще предлагаю в разделе 5 прям вставить образец ультимативно развившегося и организованного каталога /docs, чтобы было видно к чему можно прийти.

> Также про скиллы: "Не повторяйте один и тот же паттерн. Сделайте из него скилл или док и используйте/прилинковывайте. Все это и для LLM и для вас."

Три изменения:
- Добавлена секция "Рефлексия" с чеклистом (противоречия, архаизмы, раздутый контекст) + `[!WARNING]`: "Устаревшая документация хуже отсутствующей"
- Добавлен пример организации `/docs` (дерево: ARCHITECTURE.md, API.md, adr/, specs/, traces/)
- Добавлен паттерн: "Не повторяйте паттерн — сделайте из него скилл или документ. Это работает и для LLM, и для вас."

---

## Модуль 6

### mcp-server-priorities.md

> В Git заголовки заехали под блоки.

Исправлено форматирование Mermaid: правильное экранирование subgraph labels, `<br/>` вместо `<br>`, emoji-префиксы для визуального разделения уровней. Совет вынесен в `[!TIP]` блок.

### 01-setup-mcp-servers.md

> "Покажи список открытых PR в репозитории" — я боюсь он тут и без MCP может хорошо справиться, если локально установлен GH.

Задача "Покажи список открытых PR" убрана из практических упражнений. Добавлен `[!NOTE]`: "Задача работает и без MCP — через `gh` CLI. Цель упражнений ниже — проверить что MCP-серверы отвечают." Заменена на задачу с Figma (требует MCP).

### 01-what-is-mcp.md

> Диаграмму можно в Mermaid.

ASCII-арт диаграмма заменена на Mermaid flowchart: `AI Agent ↔ MCP Server → External Tool` с подписями JSON-RPC 2.0 и транспорт.

---

## Сквозное

> В остальном классно. Оверолл можно использовать инфоблоки для заострения внимания.

Добавлены GitHub alert blocks по всем затронутым файлам (20 штук):

- `[!TIP]` (6) — подсчёт баллов, разделение AGENTS.md на файлы, DRY в traces, MCP-серверы, комбинирование инструментов, skills вместо детальных промптов
- `[!NOTE]` (4) — дорогие модели не всегда лучше, многофакторная защита тестами + ревью, gh CLI vs MCP, MCP как расширение
- `[!IMPORTANT]` (3) — критерии приёмки, CLAUDE.md читается автоматически, "опционально" = "не делать"
- `[!WARNING]` (3) — устаревшая документация, дешёвые модели на архитектуру, агент меняет тесты вместо кода
- `[!CAUTION]` (1) — blockedPaths для секретов
