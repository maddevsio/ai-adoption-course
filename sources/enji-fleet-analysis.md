# Enji Fleet: –∞–Ω–∞–ª–∏–∑ –ø—Ä–∞–∫—Ç–∏–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ò–ò

–ò—Å—Ç–æ—á–Ω–∏–∫: `/home/kb/Documents/workspace/mad_devs/enji-fleet`

Enji Fleet -- –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ AI-–∞–≥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è —Å–∞–º–∞ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è AI-–∞–≥–µ–Ω—Ç–∞–º–∏.
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç -- —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏ —Ñ–∞–π–ª–æ–≤ –∏–∑ Fleet –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫—É—Ä—Å–∞.

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

–ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –º–æ–¥—É–ª–µ–π –∫—É—Ä—Å–∞ –∞–≥–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã:
1. –ß–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏–º–µ—Ä–æ–≤
2. –•–æ–¥–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Fleet (`/home/kb/Documents/workspace/mad_devs/enji-fleet`) –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–¥–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏–∑ Fleet –∫–∞–∫ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –∫ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–º –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º
4. –¶–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã, –∞ –Ω–µ –ø–µ—Ä–µ—Å–∫–∞–∑—ã–≤–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ

### –ú–∞–ø–ø–∏–Ω–≥: –ø—Ä–∞–∫—Ç–∏–∫–∞ Fleet ‚Üí –º–æ–¥—É–ª—å –∫—É—Ä—Å–∞

| –ü—Ä–∞–∫—Ç–∏–∫–∞ Fleet | –ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞ | –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç |
|----------------|-------------|----------------|
| AGENTS.md | –ú–æ–¥—É–ª—å 4 (–∞–≥–µ–Ω—Ç—ã) | –ü—Ä–∏–º–µ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –∞–≥–µ–Ω—Ç–∞ |
| Agent Workflows (dev/doc/reflect/push) | –ú–æ–¥—É–ª—å 4 (–∞–≥–µ–Ω—Ç—ã) | –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è |
| Constitution + traces + reflect-mode | –ú–æ–¥—É–ª—å 5 (SDD) | –ò–µ—Ä–∞—Ä—Ö–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º |
| code-implementation-prompt.md | –ú–æ–¥—É–ª—å 5 (SDD) | –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∫–∞–∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è |
| spec-preparation-prompt.md | –ú–æ–¥—É–ª—å 5 (SDD) | –ü—Ä–æ–º–ø—Ç –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π |
| MCP-—Å–µ—Ä–≤–µ—Ä Fleet SDK | –ú–æ–¥—É–ª—å 6 (MCP) | –ö–∞—Å—Ç–æ–º–Ω—ã–π MCP –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç‚Üî–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ |
| Multi-agent Docker image | –ú–æ–¥—É–ª—å 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è) | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è AI-–∞–≥–µ–Ω—Ç–æ–≤ |
| CLI registry (config.go) | –ú–æ–¥—É–ª—å 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è) | –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ –≥–µ—Ç–µ—Ä–æ–≥–µ–Ω–Ω—ã–º–∏ AI CLI |
| Agent profiles (YAML) | –ú–æ–¥—É–ª—å 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è) | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: —Ä–æ–ª–∏, –º–æ–¥–µ–ª–∏, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã |
| Hot-swap, team pooling | –ú–æ–¥—É–ª—å 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è) | –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ —ç–∫–æ–Ω–æ–º–∏–∏ |
| Git worktree (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) | –ú–æ–¥—É–ª—å 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è) | –ò–∑–æ–ª—è—Ü–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ |
| Credential management | –ú–æ–¥—É–ª—å 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è) | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ credentials –º—É–ª—å—Ç–∏–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ |
| Memory Service + embeddings | –ú–æ–¥—É–ª—å 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è) | RAG –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤ |
| Co-authored-by + PR footer | –ú–æ–¥—É–ª—å 8 (–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å) | –ê—Ç—Ä–∏–±—É—Ü–∏—è AI, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å |

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 1: –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∫–∞–∫ "–ø–∞–º—è—Ç—å" –∞–≥–µ–Ω—Ç–æ–≤

**–§–∞–π–ª:** `docs/constitution.md`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 5 (SDD)

–ê–≥–µ–Ω—Ç—ã –Ω–µ –∏–º–µ—é—Ç –ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏. Constitution -- –∂–∏–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç ~400-500 —Å—Ç—Ä–æ–∫, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫ –ø—Ä–æ—á—Ç–µ–Ω–∏—é –ø–µ—Ä–µ–¥ –ª—é–±–æ–π —Ä–∞–±–æ—Ç–æ–π.

–°–æ–¥–µ—Ä–∂–∏—Ç:
- Tech stack (—Ç–∞–±–ª–∏—Ü—ã —Å —Ç–æ—á–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏)
- ADR (Architecture Decision Records) -- —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
- Patterns -- –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- Antipatterns -- —á—Ç–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ

–ö–ª—é—á–µ–≤–∞—è —Ü–∏—Ç–∞—Ç–∞ –∏–∑ –ø—Ä–æ–º–ø—Ç–∞ (`docs/prompts/code-implementation-prompt.md`):
> **–¢—ã –Ω–µ –∏–º–µ–µ—à—å –ø–∞–º—è—Ç–∏.** –ö–∞–∂–¥–∞—è —Å–µ—Å—Å–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω—É–ª—è ‚Äî —Ç—ã –Ω–µ –ø–æ–º–Ω–∏—à—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–µ—Å—Å–∏–∏. –î–æ —Ç–µ–±—è –º–æ–≥–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –¥—Ä—É–≥–∏–µ –∞–≥–µ–Ω—Ç—ã. –ü–æ—ç—Ç–æ–º—É —Ç—ã –û–ë–Ø–ó–ê–ù –ø—Ä–æ—á–∏—Ç–∞—Ç—å `docs/constitution.md` –ø–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞. –≠—Ç–æ —Ç–≤–æ—è –ø–∞–º—è—Ç—å.

–ü—Ä–∞–≤–∏–ª–∞ –±—é–¥–∂–µ—Ç–∞:
> **–ë—é–¥–∂–µ—Ç:** –û—Ä–∏–µ–Ω—Ç–∏—Ä ~400-500 —Å—Ç—Ä–æ–∫, –Ω–æ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –ø–æ–ª–µ–∑–Ω–æ—Å—Ç—å, –∞ –Ω–µ —Ä–∞–∑–º–µ—Ä. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–º–æ–≥–∞—Ç—å –∞–≥–µ–Ω—Ç—É –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

**–î–ª—è –∫—É—Ä—Å–∞:** –ø–∞—Ç—Ç–µ—Ä–Ω "–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç". –í–º–µ—Å—Ç–æ RAG -- —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π markdown. –ë—é–¥–∂–µ—Ç —Å—Ç—Ä–æ–∫ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ä–∂–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 2: –ß–µ—Ç—ã—Ä–µ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞ (Agent Workflows)

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `.agent/workflows/`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 4 (–∞–≥–µ–Ω—Ç—ã)

| –†–µ–∂–∏–º | –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| dev-mode | `.agent/workflows/dev-mode.md` | –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ —Å–ø–µ–∫–∞–º —Å —Å—É–±–∞–≥–µ–Ω—Ç–∞–º–∏ |
| doc-mode | `.agent/workflows/doc-mode.md` | –¢–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –Ω–∏–∫–∞–∫–æ–≥–æ –∫–æ–¥–∞ |
| reflect-mode | `.agent/workflows/reflect-mode.md` | –ê—É–¥–∏—Ç, –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π –∏–∑ traces –≤ constitution |
| push | `.agent/workflows/push.md` | Commit + PR + Telegram-–ø–æ—Å—Ç |

reflect-mode -- –∞–≥–µ–Ω—Ç-—Ä–µ–≤—å—é–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π:
- –ù–ï –ø–∏—à–µ—Ç –∫–æ–¥
- –ß–∏—Ç–∞–µ—Ç traces –æ—Ç –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤
- –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä—É–µ—Ç –∑–Ω–∞–Ω–∏—è –≤ constitution –∏ decision log
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–¥–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º constitution

**–î–ª—è –∫—É—Ä—Å–∞:** —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏. –û–¥–∏–Ω –ø–∏—à–µ—Ç, –¥—Ä—É–≥–æ–π –∞—É–¥–∏—Ç–∏—Ä—É–µ—Ç. Constitution –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–µ —Ö–∞–æ—Ç–∏—á–Ω–æ, –∞ —á–µ—Ä–µ–∑ reflect-mode.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 3: Trace-—Ñ–∞–π–ª—ã -- —ç–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `docs/traces/` (25+ —Ñ–∞–π–ª–æ–≤)
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 5 (SDD)

–ö–∞–∂–¥—ã–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –ø–ª–∞–Ω –æ—Å—Ç–∞–≤–ª—è–µ—Ç trace —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å–µ–∫—Ü–∏—è–º–∏:
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
- –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- **"–î–ª—è –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–∏"** -- —á—Ç–æ —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏
- **"–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è"** -- –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç –ø–ª–∞–Ω–∞ —Å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º

–¶–∏–∫–ª –∑–Ω–∞–Ω–∏–π:
```
Agent —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –ø–∏—à–µ—Ç trace ‚Üí reflect-mode —á–∏—Ç–∞–µ—Ç traces ‚Üí
–æ–±–Ω–æ–≤–ª—è–µ—Ç constitution ‚Üí —Å–ª–µ–¥—É—é—â–∏–π agent —á–∏—Ç–∞–µ—Ç constitution ‚Üí ...
```

–ü—Ä–∞–≤–∏–ª–∞:
> **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π PR –±–µ–∑ trace —Ñ–∞–π–ª–∞.**
> **–ù–ï –ø–∏—à–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ `constitution.md`** ‚Äî consolidation –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ reflect-mode

**–î–ª—è –∫—É—Ä—Å–∞:** –ø–∞—Ç—Ç–µ—Ä–Ω "field notes ‚Üí constitution". –ê–≥–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç —Å–ª—É—á–∞–π–Ω–æ —Å–ª–æ–º–∞—Ç—å constitution.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 4: Multi-agent Docker Image —Å 4 AI CLI

**–§–∞–π–ª:** `fleet-agent-image/Dockerfile`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

```dockerfile
# === Layer 3: Claude Code ===
RUN npm install -g @anthropic-ai/claude-code

# === Layer 4: Codex ===
RUN npm install -g @openai/codex

# === Layer 5: Gemini CLI ===
RUN npm install -g @google/gemini-cli

# === Layer 6: OpenCode ===
RUN curl -fsSL https://opencode.ai/install | bash

# === Layer 7: Fleet SDK + Entrypoint ===
COPY --from=fleet-sdk-builder /out/fleet-sdk /usr/local/bin/fleet-sdk
ENTRYPOINT ["/usr/local/bin/fleet-sdk", "run"]
```

–û–¥–∏–Ω Docker-–æ–±—Ä–∞–∑ —Å —á–µ—Ç—ã—Ä—å–º—è AI CLI. Entrypoint -- `fleet-sdk run`, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π –Ω—É–∂–Ω—ã–π CLI –ø–æ –ø—Ä–æ—Ñ–∏–ª—é.

**–î–ª—è –∫—É—Ä—Å–∞:** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è AI-–∞–≥–µ–Ω—Ç–æ–≤. –ò–∑–æ–ª—è—Ü–∏—è + –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 5: –†–µ–µ—Å—Ç—Ä CLI —Å —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

**–§–∞–π–ª:** `backend/cmd/fleet-sdk/internal/clibuilder/config.go`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

```go
registry = map[string]CLIConfig{
    "claude-code": {
        Binary:           "claude",
        PromptFlag:       "-p",
        SystemPromptFlag: "--append-system-prompt",
        ModelFlag:        "--model",
        OutputFlag:       "--output-format json",
        DefaultTools:     []string{"Bash", "Read", "Edit", "Write", "Glob", "Grep"},
        ToolsFlag:        "--allowedTools",
    },
    "codex": {
        Binary:     "codex",
        OutputFlag: "--json",
        ExtraFlags: []string{"--full-auto"},
        CombinePrompts: true,
    },
    "gemini": {
        Binary:     "gemini",
        PromptFlag: "-p",
        ModelFlag:  "-m",
        ExtraFlags: []string{"--yolo"},
        CombinePrompts: true,
    },
    "opencode": {
        Binary:     "opencode",
        PromptFlag: "-p",
        OutputFlag: "-f json",
        CombinePrompts: true,
    },
}
```

–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ CLI: —É –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Å–≤–æ–∏ —Ñ–ª–∞–≥–∏, –Ω–æ Fleet SDK –∑–Ω–∞–µ—Ç –∫–∞–∫ —Å –∫–∞–∂–¥—ã–º —Ä–∞–±–æ—Ç–∞—Ç—å.

**–î–ª—è –∫—É—Ä—Å–∞:** –ø–∞—Ç—Ç–µ—Ä–Ω "CLI adapter" -- –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–≤–µ—Ä—Ö –≥–µ—Ç–µ—Ä–æ–≥–µ–Ω–Ω—ã—Ö AI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è hot-swap.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 6: –ü—Ä–æ—Ñ–∏–ª–∏ –∞–≥–µ–Ω—Ç–æ–≤

**–§–∞–π–ª:** `backend/services/agent/agent-profiles.yaml`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

```yaml
profiles:
  claude-developer:
    cli: claude
    roles: [developer, reviewer, tester, deployer, researcher]
    model: claude-sonnet-4-5-20250929
    system_prompt: "You are a senior software developer."
    max_turns: 100
    priority: normal

  claude-architect:
    cli: claude
    roles: [planner, reviewer, researcher, evaluator]
    model: claude-sonnet-4-5-20250929
    system_prompt: "You are a software architect."
    max_turns: 50
    priority: high

  codex-developer:
    cli: codex
    roles: [developer, tester]
    model: codex-mini
    priority: low
```

Task Service –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–≥–µ–Ω—Ç–∞ –ø–æ —Ä–æ–ª–∏: `task role ‚Üí profile SelectForRole`.

**–î–ª—è –∫—É—Ä—Å–∞:** —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è -- —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á. Architect —Å high priority, Codex Developer —Å low priority –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 7: MCP-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç ‚Üî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

**–§–∞–π–ª:** `backend/cmd/fleet-sdk/internal/cli/mcp_server.go`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 6 (MCP)

Fleet SDK –∑–∞–ø—É—Å–∫–∞–µ—Ç MCP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ stdin/stdout —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏:

| MCP Tool | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|------------|
| `report_progress` | –ê–≥–µ–Ω—Ç –¥–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ |
| `report_error` | –ê–≥–µ–Ω—Ç —Å–æ–æ–±—â–∞–µ—Ç –æ–± –æ—à–∏–±–∫–µ |
| `store_memory` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞–Ω–∏–µ –≤ Memory Service |
| `fetch_context` | –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ Memory Service |
| `save_artifact` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ Store Service |

**–î–ª—è –∫—É—Ä—Å–∞:** MCP –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–∂–¥—É LLM –∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏. –ê–≥–µ–Ω—Ç –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–µ.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 8: Credential Management

**–§–∞–π–ª:** `backend/cmd/fleet-sdk/internal/credentials/manager.go`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

```go
func DefaultMappings(homeDir string) []AuthFileMapping {
    return []AuthFileMapping{
        {CLITool: "claude-code", EnvVar: "CLAUDE_SESSION_TOKEN",
         FilePath: filepath.Join(homeDir, ".claude", ".credentials.json")},
        {CLITool: "codex", EnvVar: "CODEX_SESSION_TOKEN",
         FilePath: filepath.Join(homeDir, ".codex", "auth.json")},
        {CLITool: "opencode", EnvVar: "OPENCODE_AUTH_JSON",
         FilePath: filepath.Join(homeDir, ".local", "share", "opencode", "auth.json")},
    }
}
```

Session tokens –∏–∑ ENV ‚Üí —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ CLI. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: `chmod 0600`.

**–î–ª—è –∫—É—Ä—Å–∞:** —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ credentials –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ AI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 9: Hot-Swap –∏ Team Pooling

**–§–∞–π–ª:** `docs/ideas/2026-01-27-smart-agent-pool.md`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

–ò–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—É–ª–∞:
```yaml
agents:
  claude:
    - id: "senior_architect"
      model: "claude-4.5-opus"          # –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏
    - id: "junior_developer"
      model: "claude-4.5-haiku"         # –ü—Ä–æ—Å—Ç—ã–µ –∏ –¥–µ—à—ë–≤—ã–µ
    - id: "sonnet_bob"
      model: "claude-4-sonnet"
      availability_window: "00:00-08:00"  # –ù–æ—á–Ω–∞—è —Å–º–µ–Ω–∞
  amp:
    - id: "amp_free_tier_oleg_account"
      daily_budget: 10                   # $10/–¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ
```

–¢—Ä–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞ hot-swap:
- **Timeout Swap:** Gemini Flash –¥–æ–ª–≥–æ –¥—É–º–∞–µ—Ç ‚Üí –∑–∞–º–µ–Ω–∞ –Ω–∞ Claude Haiku
- **Error Swap:** 429/5xx –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–æ–≥–æ
- **Critic Swap:** N –ø—Ä–æ–≤–∞–ª–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Üí —ç—Å–∫–∞–ª–∞—Ü–∏—è –Ω–∞ Senior Agent (Opus)

Team Pooling: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–≤–æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤. –ù–æ—á–Ω–∞—è —Å–º–µ–Ω–∞: —Ç–æ–∫–µ–Ω –ë–æ–±–∞ —Å 00:00 –¥–æ 08:00.

**–î–ª—è –∫—É—Ä—Å–∞:** —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞—Ç—Ä–∞—Ç. –ü—É–ª –¥–µ—à—ë–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ —Å —ç—Å–∫–∞–ª–∞—Ü–∏–µ–π –Ω–∞ –¥–æ—Ä–æ–≥–æ–≥–æ.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 10: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π Git Worktree

**–§–∞–π–ª:** `AGENTS.md`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

```bash
# MANDATORY: always use git worktree
git worktree add ../enji-fleet-<plan-name> -b feat/<plan-name>
cd ../enji-fleet-<plan-name>
# work in isolation...
git worktree remove ../enji-fleet-<plan-name>
```

–ü—Ä–∞–≤–∏–ª–æ: –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –ö–∞–∂–¥—ã–π –ø–ª–∞–Ω -- –æ—Ç–¥–µ–ª—å–Ω—ã–π worktree.

**–î–ª—è –∫—É—Ä—Å–∞:** git worktree –∫–∞–∫ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 11: –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–≥–µ–Ω—Ç–∞-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

**–§–∞–π–ª:** `docs/prompts/code-implementation-prompt.md`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 5 (SDD), 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

–ü–æ–ª–Ω—ã–π pipeline –∏–∑ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤)
2. –ß—Ç–µ–Ω–∏–µ constitution, decision log, entry.md
3. –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ worktree
4. –ü–æ–∏—Å–∫ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ –≤ Progress Table (üîÑ / ‚ùå / ‚¨ú)
5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí üîÑ in progress
6. –ö–æ–¥ + —Ç–µ—Å—Ç—ã (TDD)
7. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è: goimports, go vet, go test, go build
8. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí ‚úÖ done –∏–ª–∏ ‚ùå failed
9. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ trace (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ)
10. –°–æ–∑–¥–∞–Ω–∏–µ PR

–ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞:
> **–°–¢–û–ü –∏ –∏—Å–ø—Ä–∞–≤—å:** —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç, go vet –æ—à–∏–±–∫–∏, coverage < –º–∏–Ω–∏–º—É–º–∞, build –ø–∞–¥–∞–µ—Ç
> **–ó–ê–ü–†–ï–©–ï–ù–û:** –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö, –∫–æ–¥ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤

–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:
> **–î–µ–π—Å—Ç–≤—É–π –∞–≤—Ç–æ–Ω–æ–º–Ω–æ.** –ù–µ —Å–ø—Ä–∞—à–∏–≤–∞–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫.

**–î–ª—è –∫—É—Ä—Å–∞:** –ø—Ä–æ–º–ø—Ç –∫–∞–∫ "–¥–æ–ª–∂–Ω–æ—Å—Ç–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è" –¥–ª—è –∞–≥–µ–Ω—Ç–∞. –ß—ë—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞, —Å—Ç–∞—Ç—É—Å—ã, –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ —É—Å–ª–æ–≤–∏—è.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 12: Memory Service —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º

**–§–∞–π–ª:** `backend/services/memory/internal/config/config.go`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 7 (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

–¢—Ä–∏ embedding-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
- **OpenAI** `text-embedding-3-small` (default)
- **Ollama** `nomic-embed-text` (–ª–æ–∫–∞–ª—å–Ω–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- **Google Gemini** `text-embedding-004`

Backend: ChromaDB. MCP tools: `store_memory` / `fetch_context`.

**–î–ª—è –∫—É—Ä—Å–∞:** RAG –≤ –¥–µ–π—Å—Ç–≤–∏–∏. Memory Service —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤.

---

## –ü—Ä–∞–∫—Ç–∏–∫–∞ 13: Co-authorship –∏ –∞—Ç—Ä–∏–±—É—Ü–∏—è

**–§–∞–π–ª:** `.agent/workflows/push.md`
**–ú–æ–¥—É–ª—å –∫—É—Ä—Å–∞:** 8 (–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å)

–ö–æ–º–º–∏—Ç—ã:
```
Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
```

Footer PR:
```
ü§ñ Generated with [Claude Code](https://claude.ai/code)
```

–ü–ª—é—Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è Telegram-–ø–æ—Å—Ç–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º –¥–ª—è –∫–æ–º–∞–Ω–¥—ã.

**–î–ª—è –∫—É—Ä—Å–∞:** –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å. –ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç –∏ PR —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ AI-–∞–≥–µ–Ω—Ç–∞.

---

## –†–µ–∑—é–º–µ: 7 —É—Ä–æ–≤–Ω–µ–π –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ò–ò –≤ Enji Fleet

| –£—Ä–æ–≤–µ–Ω—å | –ß—Ç–æ | –ü—Ä–∏–º–µ—Ä –∏–∑ Fleet |
|---------|-----|-----------------|
| 1 | –ò–ò –ø–∏—à–µ—Ç –∫–æ–¥ | Claude Code –≤ dev-mode |
| 2 | –ò–ò —Ä–µ–≤—å—é–∏—Ç –∫–æ–¥ | reflect-mode –∞–≥–µ–Ω—Ç |
| 3 | –ò–ò –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏ | spec-preparation-prompt |
| 4 | –ò–ò –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –∑–Ω–∞–Ω–∏—è | traces ‚Üí constitution, Memory Service |
| 5 | –ò–ò —É–ø—Ä–∞–≤–ª—è–µ—Ç –ò–ò | –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å hot-swap |
| 6 | –ò–ò —Ä–∞–∑–≤–∏–≤–∞–µ—Ç —Å–µ–±—è | field notes ‚Üí skills |
| 7 | –ß–µ–ª–æ–≤–µ–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç | PR –Ω–∞ —Ä–µ–≤—å—é |
